<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <textarea name="text" id="text" cols="30" rows="10"></textarea>
    <pre id="pre"></pre>
    <script>
      const bookCate = [
        { sid: "1", name: "程式設計", parent_sid: "0" },
        { sid: "2", name: "繪圖軟體", parent_sid: "0" },
        { sid: "3", name: "網際網路應用", parent_sid: "0" },
        { sid: "4", name: "PHP", parent_sid: "1" },
        { sid: "5", name: "JavaScript", parent_sid: "1" },
        { sid: "7", name: "PS", parent_sid: "2" },
        { sid: "8", name: "Chrome", parent_sid: "3" },
        { sid: "9", name: "騙錢的", parent_sid: "3" },
        { sid: "10", name: "C++", parent_sid: "1" },
        { sid: "16", name: "椅拉", parent_sid: "2" },
      ];
      const newCate = [];
      const dict = {};

      for(let i of bookCate){
        dict[i.sid] = i;
      }

      for(let i of bookCake){
        if(i.parent_sid !== '0'){
          const parent = dic[i.parent_sid];
          parent.nodes = parent.nodes || [];
          parent.nodes.push(i)
        }
      }



      for (let i of bookCate) {
        if (i.parent_sid === "0") {
          newCate.push(i);
        }
      }

      console.log(newCate);

      document.querySelector("#text").value = JSON.stringify(resultData, null, 4);
      document.querySelector("#pre").innerHTML = JSON.stringify(resultData, null, 4);


      
    </script>
  </body>
</html>
